# linux7shell基础

## shell是什么
shell相当于解释器，将我们输入的代码解释成机器码，交给linux内核处理；shell也是一个编程语言，我们可以利用shell写程序。

## shell分类
B shell中Bash一般用于linux，C shell一般用于Unix。linux中有很多shell操作界面可以调用比如sh，在Windows中的cmd就是一个典型的区别于图形操作界面shell的子shell。linux默认最高层shell为Bash。

## 脚本执行方式
1.echo + abc输出abc；echo "abc abc"用于输出有空白符的字符串；echo -e "sss\n"可以利用转义字符。
2.脚本编写完成后要么bash ll.sh或者先赋予可执行权限chmod 755 ll.sh再执行。
3.alias命令和define一样，都是其别名：alias vi='vim'就是执行vi的时候实际上是在执行vim。但是一般的alias是一次性的，也就是如果我们重启linux，vi=vim将不再存在，这个时候就需要我们将alias vi='vim'命令加入系统的环境变量。我们直接vi /root/.bashrc进入到文件后将命令写入就可以了，但是出来后需要source .bashrc才可以在不重启下更新环境变量。删除操作一样unalias只能暂时删除，永久必须进入环境变量删除。
4.命令执行顺序
>1.绝对路径或相对路径执行的命令；
>2.别名；
>3.bash内部命令；
>4.按照$PATH环境变量找到的第一个命令。
5.注意Ctrl c未终止命令，Ctrl z终止。

## 历史命令
1.history会返回你最近使用的历史命令表，history -c清空历史命令，但是这个时候你依然可以在.bash_history文件中找到，这是因为你没有更新，history -w就是起到更新作用，我们在.bash_history文件中只保存上次logout后的历史命令，而当前状况的命令不存，我们也能用-w更新。在linux默认历史命令最大数目是1000，我们可以进入/etc/profile进行修改。
2.我们可以利用!来向上检索并重复执行命令，!2执行再历史库中的第二条命令，!!执行上一条命令，!ser执行以ser最近ser开头的命令，这其中!!和!ser最常用，如重启网卡：service network restart后我们之后要再重启就是!ser。
3.tab键补全操作是很快速的操作，可以加快速度，减少错误，一般是输入命令tab，这是实在系统的$PATH环境变量中查找，而查找文件可以使用同样的方式。

## 输出重定向
1.>符号就是将某个输出重定向到另一个文件中，比如ls命令输出是显示器，我们可以ls > test.log就可ls的输出存储到test.log中，而非输显示器，而>操作时覆盖操作，也就是当test.log有内容会把之前内容覆盖，而>>则是增加。但是这个只是存储正确的命令输出，错误的则需要时ls 2>>test.log，一定把>>左右两边没空格，而上述方式有缺陷，我们无法知道我们的指令是否正确，这就需要下面的方法。
2.ls &>>test.log就可以把正确或者错误都存储在test.log,而ls >> success.log 2>>error.log就是把对的出入success.log，错的输error.log。
3.输入重定向：
>1.wc [选项] [文件]就是把输入记录其单词数，行数，字节数。选项-c就是指统计字节数；-w就是指统计单词数；-l只统计其行数。wc < test2.log可以记录test.log的行数、单词数、字节数（这里的<可省）。而wc << sss则是输入一堆字知道到sss停止，输入重定向用途很小。

## 管道符
1.多命令执行
>;是一个连接多命令的方式，不论其中命令是否报错都会执行所有命令，但是这样会有问题，就是我们在命令错误无法停，这时就需要&&，这和编程语言不一样，这里的&&是前一个命令对了才执行后一个，前一个命令错了就不执行后面的，还有||更不一样，当前一个命令对了*就不执行后面*，只在前面错了才执行后面，我们可以利用这个编写ls && echo yes || echo no；方式来判断ls是否成功执行，其中ls对那么echo yes而不echo no，如果ls错则echo yes没有输出，则echo no。
2.管道符
>|符很有用，用来连接两个命令，把第一个命令的执行结果作为第二个命令的参数，如ls /etc | more就是分屏显示/etc目录的内容，这里more命令就是分屏显示，它把ls的结果作为参数。或者netstat -an | grep ESTABLISHED | wc -l就是把当前网络信息作为参数给grep，用grep找到ESTABLISHED的那行，再有wc -l输出有几行以此查看有多少用户在使用当前的服务器。

## 通配符
1.?匹配单一字符、*匹配任意、[]匹配一个字符、[0-9]匹配一个数字、[^0-9]匹配一个非数字。通配符使用找文件、目录。
2.我们可以为变量赋值aa=1，然后echo $aa就能输出aa的值，这里$代表调用变量的值，当我们向aa=$(ls)就是aa为ls执行得到的值，''和“”也有不同，如果''则忽略一切特殊符号，而""会识别$之类的特殊，\转义将特殊字符转换成普通。